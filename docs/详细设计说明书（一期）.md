# 算法平台项目-详细设计说明书

------

[TOC]

## 1. 概述
### 1.1 需求概述
> 提供老师和学生等算法重业人员开发算法和发布算法等

### 1.2 运行环境
#### 1.2.1 软件环境

|类型|信息|
|-----  |-----|
|数据库|MySQL、Redis|
|应用服务器|Tomcat|
|开发工具|Eclipse、IntelliJ IDEA|

#### 1.2.2 硬件环境
微服务部署。
### 1.3 依赖关系
#### 1.3.1 外部依赖

除系统数据库外，还依赖于文献。
#### 1.3.2 内部依赖
无。

## 2 系统总体设计
### 2.1	系统架构

![系统架构图](imgs/architecture.png?raw=true)

## 3 模块接口设计
### 3.1	算法编辑模块
**1. 请求URL**

–	请求URL：http://192.168.1.94/algorithm/{user}/{modId}/edit
–	请求方式：GET
–	参数如下：

|参数名|必选|类型|说明|
|-----  |----- |----- |-----   |
|user |是  |String | 当前登录用户Code|
|modId |是  |String | 编辑算法ID|

**2. 响应实例**

 ```
 {
     "code" : "200",
     "msg" : "成功",
     "detail" : {
     },
     "data" : "true"
 }

 ```
–	结果如下：

|字段名|类型|说明|
|-----  |----- |-----   |
|modId |String | 算法ID，英文名称|
|modName |String | 算法中文名称|
|latestVersion |String | 最新提交版本|
|latestCommit |String | 最新提交Git版本号|
|listpath |String | 文件集合|
### 3.2	修改信息接口
**1. 请求URL**

–	请求URL：http://192.168.1.107/user/updateUserInformation
–	请求方式：POST
–	参数如下：

|参数名|必选|类型|说明|
|-----  |----- |----- |-----   |
|usrSn |是  |String | 用户唯一ID|
|usrName |是  |String | 用户中文名字|
|usrCode |是  |String | 用户英文名字|
|email |是  |String | 用户的邮箱|
|needNotify |是  |String | 用户是采用邮箱还是短信方式|
|telephone |是  |String | 用户电话|
|usrUrl |是  |String | 用户个人主要|
**2. 响应实例**

 ```
 {
     "code" : "200",
     "msg" : "成功",
     "detail":null,
     "data" : "SUCCESS"
 }
### 3.3	更改密码接口
**1. 请求URL**

–	请求URL：http://192.168.1.107/user/changePassword
–	请求方式：POST
–	参数如下：

|参数名|必选|类型|说明|
|-----  |----- |----- |-----   |
|passwd |是  |String | 原始密码|
|newPassword |是  |String |新密码|
|confirmPassword |是  |String | 确认新密码|

**2. 响应实例**

 ```
 {
     "code" : "200",
     "msg" : "成功",
     "detail":null,
     "data" : "SUCCESS"
 }
 
 ### 3.4	账户查询
 **1. 请求URL**
 
 –	请求URL：http://192.168.1.47/algorithms/accountInformation
 –	请求方式：GET
 –	参数如下：
 
 |参数名|必选|类型|说明|
 |-----  |----- |----- |-----   |


 
 **2. 响应实例**
 
  ```
  {
      "code" : "200",
      "msg" : "成功",
      "detail":null,
      "data" :{"accSn":"aac44b648b10429cbaf85a6ae0f61165",
              "usrSn":"aac44b648b10429cbaf85a6ae0f63a65",
              "cashBal":22.0,
              "earnBal":33.0,
              "freeBal":44.0,
              "freeSetTime":null,
              "cash":"45.00"}
  }
  
  –	结果如下：
  
  |字段名|类型|说明|
  |-----  |----- |-----   |
  |accSn |String | 账户串号|
  |usrSn |String | 用户串号|
  |cashBal |String | 充值账户余额|
  |earnBal |String | 收入账户余额|
  |freeBal |String | 赠送账户余额|
  |cash |String | 已提现金额|

### 3.3	用户注册
 **1. 请求URL**
 
 –	请求URL：http://192.168.1.107/user/register
 –	请求方式：POST
 –	参数如下：
 
 |参数名|必选|类型|说明|
 |-----  |----- |----- |-----   |
 |usrCode |是  |String | 用户注册名字|
 |passwd |是  |String | 密码|
 |usrName |是  |String | 用户中文名字|
 |email |是  |String | 邮件|

 
 **2. 响应实例**
 
  ```
  {
      "code" : "200",
      "msg" : "成功",
      "detail":null,
      "data" :"SUCCESS"
  }
  
  ### 3.4	用户算法使用情况
   **1. 请求URL**
   
   –	请求URL：http://192.168.1.107/algorithms/algorithmRecord
   –	请求方式：POST
   –	参数如下：
   
   |参数名|必选|类型|说明|
   |-----  |----- |----- |-----   |
   |page |是  |String | 页数|
   |rows |是  |String | 每页显示多少|

  
   
   **2. 响应实例**
   
 {
  "code":200,
  "msg":"成功",
  "detail":null,
  "data":[{"umcSn":"aac44b648b10429cbaf85a6ae0111165",
         "verSn":"aac44b648b10429cbaf85a6ae0113aa2",
         "callUsrSn":"aac44b648b10429cbaf85a6ae0113a65",
         "ownerUsrSn":"aac44b648b10429cbaf85asse0113aa5",
         "startTime":null,"endTime":null,"duration":200,
         "billedCallCnt":1,"callPayAmount":20.0,
         "modCallCnt":1000,"page":0,"rows":0,"total":0,
         "modName":"张传智1","createTime":"2017-10-12 04:06:33"},
        {"umcSn":"1","verSn":"aac44b648b10429cbaf85a6ae0113aa5",
        "callUsrSn":"aac44b648b10429cbaf85a6ae0113a65",
        "ownerUsrSn":null,"startTime":null,"endTime":null,
        "duration":300,"billedCallCnt":2,
        "callPayAmount":30.0,"modCallCnt":2000,"page":0,
        "rows":0,"total":0,"modName":"张传智",
        "createTime":"2017-10-11 04:07:37"}]
 }
 
   –	结果如下：
   
   |字段名|类型|说明|
   |-----  |----- |-----   |
   |umcSn |String | 调用串号|
   |verSn |String | 版本串号|
   |callUsrSn |String | 调用用户串号|
   |ownerUsrSn |String | 算法创建用户串号|
   |createTime |String | 日期|
   |duration |String | 持续时间|
   |modName |String | 调用算法名字|
   |modCallCnt |String | 调用次数|
   |billedCallCnt |String | 付费次数|
   |callPayAmount |String | 费用|
   
    ### 3.5	收益情况
      **1. 请求URL**
      
      –	请求URL：http://192.168.1.107/algorithms/algorithmEarnRecord
      –	请求方式：POST
      –	参数如下：
      
      |参数名|必选|类型|说明|
      |-----  |----- |----- |-----   |
      |ownerUsrSn |是  |String | 调用用户串号我调用别人算法|
      |page |是  |String | 第几页|
      |rows |是  |String | 每页显示多少|
   
     
      
      **2. 响应实例**
      
    {
        "code":200,
        "msg":"成功",
        "detail":null,
        "data":[{"umcSn":"aac44b648b10429cbaf85a6ae0111165",
        "verSn":"aac44b648b10429cbaf85a6ae0113aa2",
        "callUsrSn":"aac44b648b10429cbaf85a6ae0113a65",
        "ownerUsrSn":"aac44b648b10429cbaf85asse0113aa5",
        "startTime":null,"endTime":null,"duration":200,
        "billedCallCnt":1,"callPayAmount":20.0,
        "modCallCnt":1000,"page":0,"rows":0,
        "total":0,"modName":"张传智1",
        "createTime":"2017-10-12 04:06:33"}]
      }
    
      –	结果如下：
      
      |字段名|类型|说明|
      |-----  |----- |-----   |
      |umcSn |String | 调用串号|
      |verSn |String | 版本串号|
      |callUsrSn |String | 调用用户串号|
      |ownerUsrSn |String | 算法创建用户串号|
      |createTime |String | 日期|
      |duration |String | 持续时间|
      |modName |String | 调用算法名字|
      |modCallCnt |String | 调用次数|
      |billedCallCnt |String | 付费次数|
      |callPayAmount |String | 费用|
      
    ### 3.6	充值记录
      -    包括已经充值和正在充值记录
      **1. 请求URL**
      
      –	请求URL：http://192.168.1.107/pay/payRecord
      –	请求方式：POST
      –	参数如下：
      
      |参数名|必选|类型|说明|
      |-----  |----- |----- |-----   |
      |usrSn |是  |String | 用户串号|
      |page |是  |String | 第几页|
      |rows |是  |String | 每页显示多少|
    
     
      
      **2. 响应实例**
      
    {
        "code":200,
        "msg":"成功",
        "detail":null,
        "data":[{"traSn":"aac44b648b10429cbaf85a6ae0fe3a65",
        "usrSn":"aac44b648b10429cbaf85a6ae0f63a65","orderId":"",
        "payTime":null,"payNo":"111111",
        "status":"222222",
        "paySrc":"333333",
        "cashPayAmount":null,
        "currency":null,"creditPerUnit":null,"description":null,
        "createTime":1507777028000,"page":0,
        "rows":0,"integral":0,"total":0}]
        }
    
      –	结果如下：
      
      |字段名|类型|说明|
      |-----  |----- |-----   |
      |traSn |String | 交易串号|
      |usrSn |String | 用户串号|
      |payTime |String | 支付时间|
      |status |String | 状态是正在充值还有已经充值|
      |paySrc |String | 充值来源|
      |cashPayAmount |String | 充值金额|
      |currency |String | 支付币种|
      |creditPerUnit |String | 兑换单价|
      |description |String | 描述|
      |integral |String | 充值积分|
      
       ### 3.6	算法详情
            -    算法详情
            **1. 请求URL**
            
            –	请求URL：http://192.168.1.94/{usrCode}/{modId}/glgorithmdetail
            –	请求方式：get
            –	参数如下：
            
            |参数名|必选|类型|说明|
            |-----  |----- |----- |-----   |
                   
            
            **2. 响应实例**
            
          {
             "code": 200,
              "msg": "请求成功",
              "detail": null,
              "data": {
                "modSn": "2",
                "usrSn": null,
                "lanSn": null,
                "catSn": null,
                "licSn": null,
                "atlSn": null,
                "modName": null,
                "modId": "2",
                "isOpenSrc": null,
                "needWeb": "0",
                "needCallOther": "0",
                "envType": "2",
                "isTrain": null,
                "isColony": null,
                "colonyPlanId": null,
                "modDesc": null,
                "licName": null,
                "lanName": "Javascript",
                "verCode": "010"
              }

            }
          }

------

&copy;祥云创想





